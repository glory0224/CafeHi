<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <title>CAFEHI 비밀번호 변경</title>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-A3rJD856KowSb7dwlZdYEkO39Gagi7vIsF0jrRAoQmDKKtQBHUuLZ9AsSv4jD4Xa" crossorigin="anonymous"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">
    <script src="/js/check.js" th:src="@{/js/check.js}"></script>
</head>
<body>
<div th:insert="~{cafeHi_module/header :: cafeHiHeader}"></div>

<div th:replace="~{cafeHi_module/MessageCommon :: cafeHiMyPageCommon}"></div>

<div class="d-flex justfiy-content-center">
    <div class="float-start mt-5 p-5">
        <div th:replace="~{cafeHi_module/NavCommon :: cafeHiMyPage}"></div>
    </div>

    <div class="w-50 m-auto" style="padding-top: 5%">
        <h3>비밀번호 변경</h3>
        <form class="container" action="" th:action="@{/CafeHi-MemberChangePassword}" method="post" id="memberChangePwForm">
            <div class="m-5">
                <label class="form-label">현재 비밀번호</label>
                <br>
                <input type="hidden" name="${_csrf.parameterName }" value="${_csrf.token }" />
                <!--getmemberInfo.memberCode-->
                <input type="hidden" name="memberCode" th:value="${#authentication.principal.memberCode}">

                <input id="changePw" class="form-control" type="password" name="currentPassword"/>
                <br>
                <label class="form-label">새 비밀번호</label>
                <br>
                <input id="changeNewPw" class="form-control" type="password" name="changedPassword"/>
                <br>
                <label class="form-label">새 비밀번호 확인</label>
                <br>
                <input id="changeNewPwCheck" class="form-control" type="password"/>
            </div>
            <div class="d-flex justify-content-end">
                <button class="btn btn-md btn-success " type="button" onclick="check_password()">비밀번호 변경</button>
            </div>
        </form>
    </div>

</div>

<div th:insert="~{cafeHi_module/footer :: cafeHiFooter}"></div>
</body>

<script>
    function check_password() {
        var inputPw = document.getElementById('changePw');
        var inputNewPw = document.getElementById('changeNewPw');
        var inputNewPwCheck = document.getElementById('changeNewPwCheck');


        if(inputPw.value == ""){
            alert('비밀번호를 입력해주세요.');
            return;
        }else if(inputNewPw.value == ""){
            alert('새 비밀번호를 입력해주세요.');
            return;
        } else if(inputNewPwCheck.value == ""){
            alert('새 비밀번호를 한번 더 입력해주세요.');
            return;
        } else if(inputNewPw.value != inputNewPwCheck.value) {
            alert('입력한 새 비밀번호가 서로 일치 하지 않습니다.');
            return;
        } else {
            document.getElementById('memberChangePwForm').submit();
        }

    }
</script>


</html>